window.addEventListener("load",(function(event){const timed=document.querySelectorAll('.mai-popup[data-type="time"]'),scrolls=document.querySelectorAll('.mai-popup[data-type="scroll"]'),loads=document.querySelectorAll('.mai-popup[data-type="load"]'),triggers=document.querySelectorAll('[href^="#mai-popup-"]');if(!(timed.length||scrolls.length||loads.length||triggers.length))return;let open=[];const openPopup=function(popup,event=!1){if("string"==typeof popup&&(popup=document.querySelector(popup)),!popup)return;open.push(popup);const modal="center"===popup.getAttribute("data-vertical")&&"center"===popup.getAttribute("data-horizontal");if(modal){var overlay=document.createElement("div");overlay.setAttribute("class","mai-popup-overlay"),popup.before(overlay)}popup.show(),popup.querySelectorAll(".mai-popup__close",".mai-popup-close").forEach(close=>{close.addEventListener("click",event=>{closePopup(popup)})}),popup.addEventListener("close",event=>{closePopup(popup)},{once:!0}),modal&&overlay.addEventListener("click",event=>{closePopup(popup)},{once:!0})},closePopup=function(popup){if(!popup.open)return;open=open.splice(open.indexOf(popup),1);const seconds=popup.getAttribute("data-expire"),previous=popup.previousElementSibling,overlay=!(!previous||!previous.classList.contains("mai-popup-overlay"))&&previous;if(seconds){const expire=new Date;expire.setSeconds(expire.getSeconds()+parseInt(seconds));const name=popup.getAttribute("id"),utc=expire.toUTCString(),cookie=name+"=1;expires="+utc+";path=/;SameSite=Strict;";document.cookie=cookie}popup.setAttribute("closing",""),overlay&&overlay.setAttribute("closing",""),popup.addEventListener("animationend",()=>{popup.removeAttribute("closing"),popup.close(),overlay&&overlay.remove()},{once:!0})};if(document.addEventListener("keyup",event=>{open.length&&("Escape"!==event.key&&"Esc"!==event.key||closePopup(open.pop()))}),timed.length&&timed.forEach(popup=>{setTimeout(()=>{openPopup(popup)},parseInt(popup.getAttribute("data-delay")))}),loads.length&&loads.forEach(popup=>{openPopup(popup)}),triggers.length&&triggers.forEach(trigger=>{trigger.addEventListener("click",event=>{event.preventDefault(),openPopup(event.target.getAttribute("href"))},!1)}),scrolls.length){const debounce=fn=>{let timeout;return function(){let context=this,args=arguments;timeout&&window.cancelAnimationFrame(timeout),timeout=window.requestAnimationFrame(()=>{fn.apply(context,args)})}},getScrollPercentage=element=>{if(element){var windowHeight=window.innerHeight,scrollTop=window.scrollY,elOffsetTop=element.offsetTop,elHeight=element.offsetHeight,distance=scrollTop+windowHeight-elOffsetTop,percentage=Math.round(distance/((windowHeight+elHeight)/100));return Math.min(100,Math.max(0,percentage))}};var tracker=document.querySelector("main"),scrollData=[];scrolls.forEach(popup=>{scrollData.push({distance:parseInt(popup.getAttribute("data-distance")),element:popup})}),window.addEventListener("scroll",debounce(()=>{if(!scrollData.length)return!1;var scrolled=getScrollPercentage(tracker);scrollData.forEach((data,index)=>{scrolled<data.distance||(scrollData.splice(index,1),openPopup(data.element))})}))}}));